@model List<Ecommerce.Models.Order>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

<div class="container my-5">
	<h2 class="text-center text-primary mb-4">My Orders</h2>

	@if (!Model.Any())
	{
		<div class="alert alert-info text-center">
			You have no orders yet.
		</div>
	}
	else
	{
		<div class="row g-4">
			@foreach (var order in Model)
			{
				<div class="col-lg-6 col-md-12">
					<div class="card shadow-sm border-0">
						<div class="card-header d-flex justify-content-between align-items-center bg-primary text-white">
							<span>Order #@order.OrderId</span>
							<span class="badge
		                                                @(order.Status == "Pending" ? "bg-warning text-dark" :
																													   order.Status == "Completed" ? "bg-success" :
																											  		   "bg-secondary")">
						@order.Status
					</span>
				</div>
				<div class="card-body">
					<p class="mb-2"><strong>Total:</strong> ৳@order.TotalAmount</p>
					<p class="mb-2"><strong>Payment:</strong> @order.PaymentMethod</p>
					<p class="mb-2"><strong>Date:</strong> @order.OrderDate.ToString("dd MMM yyyy")</p>

							<h6 class="mt-3">Items:</h6>
							<ul class="list-group list-group-flush">
						@foreach (var item in order.OrderItems)
								{
									<li class="list-group-item d-flex justify-content-between align-items-center">
										<span>@item.ProductName x @item.Quantity</span>
										<span>৳@(item.Price* item.Quantity)</span>
									</li>
								}
							</ul>
						</div>
						<div class="card-footer text-end">
							<a href="@Url.Action("OrderConfirmation", "Order", new { id = order.OrderId })"
							   class="btn btn-sm btn-outline-primary me-2">
								View Details
							</a>

							<form asp-action="Delete" asp-controller="Order" method="post"
								  class="d-inline"
								  onsubmit="return confirm('Are you sure you want to delete this order?');">
								<input type="hidden" name="id" value="@order.OrderId" />
								<button type="submit" class="btn btn-sm btn-outline-danger">
									Delete
								</button>
							</form>
						</div>
					</div>
				</div>
			}
		</div>
	}
</div>
